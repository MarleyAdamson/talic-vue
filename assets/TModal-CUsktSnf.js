import{e as L,r as n,c as b,w as N,o as D,x as O,y as B,g as r,j as c,k as u,n as g,z as R,A,B as v,T as W,C as q,p as i,l as m,v as I,t as S}from"./vue.esm-bundler-CJdtXRgK.js";import{_ as j}from"./TButton-DKkzQOAf.js";import{_ as U}from"./TCard-iiimh3rz.js";const K={key:0},G=["id","aria-labelledby","aria-describedby","aria-modal"],H={key:0},J={key:1,class:"flex items-start justify-between"},P=["id"],Q=["id"],X={class:"flex-1 overflow-y-auto"},Y=300,Z=L({__name:"TModal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:""},subtitle:{type:String,default:""},size:{type:String,default:"md",validator:t=>["sm","md","lg","xl","full"].includes(t)},closeOnBackdrop:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},persistent:{type:Boolean,default:!1},class:{type:String,default:""},id:{type:String,default:()=>`modal-${Math.random().toString(36).substring(2,9)}`},titleId:{type:String,default:()=>`modal-title-${Math.random().toString(36).substring(2,9)}`},descriptionId:{type:String,default:()=>`modal-description-${Math.random().toString(36).substring(2,9)}`},autoFocus:{type:Boolean,default:!1},initialFocusId:{type:String,default:""}},emits:["update:modelValue","close","open"],setup(t,{emit:C}){const l=t,f=C,a=n(l.modelValue),o=n(!1),d=n(!1),p=n(null),$=n(null),M=n(null),h=n(!1),k=b(()=>l.size==="full"),z=b(()=>{switch(l.size){case"sm":return"max-w-sm";case"lg":return"max-w-2xl";case"xl":return"max-w-4xl";case"full":return"w-full h-full mx-0 my-0 sm:max-w-full sm:mx-6 sm:my-6 sm:h-auto";case"md":default:return"max-w-lg"}}),w=b(()=>l.animated?{backdrop:"transition-opacity duration-300 ease-out",modal:"transition-all duration-300 ease-out"}:{backdrop:"",modal:""});N(()=>l.modelValue,e=>{e?x():T()});const x=async()=>{o.value=!1,d.value=!0,a.value=!0,h.value=!1,await q(),setTimeout(()=>{d.value=!1},50),l.autoFocus&&F(),f("open"),document.body.classList.add("overflow-hidden"),setTimeout(()=>{h.value=!0},500)},T=()=>{a.value&&(l.animated?(o.value=!0,setTimeout(()=>{a.value=!1,o.value=!1,f("close"),document.body.classList.remove("overflow-hidden")},Y)):(a.value=!1,f("close"),document.body.classList.remove("overflow-hidden")))},y=e=>{f("update:modelValue",e)},E=()=>{!l.closeOnBackdrop||!h.value||(document.dispatchEvent(new CustomEvent("modal-backdrop-click")),y(!1))},V=e=>{e.key==="Escape"&&a.value&&y(!1)},F=()=>{if(!p.value||!a.value)return;if(l.initialFocusId){const s=document.getElementById(l.initialFocusId);if(s){s.focus();return}}const e=p.value.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');e.length>0&&e[0].focus()};return D(()=>{document.addEventListener("keydown",V),l.modelValue&&x()}),O(()=>{document.removeEventListener("keydown",V),document.body.classList.remove("overflow-hidden")}),(e,s)=>(i(),B(W,{to:"body"},[a.value||t.persistent?(i(),r("div",K,[u("div",{ref_key:"backdropRef",ref:M,onClick:E,"data-testid":"modal-backdrop",class:g(["fixed inset-0 z-40 bg-black/40",w.value.backdrop,{"opacity-0":o.value||d.value||!a.value,"opacity-100":a.value&&!o.value&&!d.value,"pointer-events-none":!a.value}]),"aria-hidden":"true"},null,2),u("div",{ref_key:"modalRef",ref:p,id:t.id,role:"dialog","aria-labelledby":t.titleId,"aria-describedby":t.descriptionId,"aria-modal":a.value?"true":"false",tabindex:"-1",class:g(["pointer-events-none fixed inset-0 z-50 flex items-end justify-center sm:items-center",{hidden:!a.value}])},[R(U,{ref_key:"contentRef",ref:$,class:g(["pointer-events-auto relative flex flex-col overflow-hidden",k.value?"h-full w-full rounded-none sm:max-h-[calc(100vh-2rem)] sm:rounded-lg":"max-h-[calc(100vh-2rem)] w-full rounded-t-lg sm:rounded-lg",z.value,w.value.modal,{"translate-y-4 opacity-0 sm:translate-y-0 sm:scale-95":o.value||d.value||!a.value,"translate-y-0 opacity-100 sm:scale-100":a.value&&!o.value&&!d.value},l.class]),elevation:"lg",rounded:k.value?"none":"lg"},A({header:v(()=>[e.$slots.header?(i(),r("div",H,[m(e.$slots,"header")])):t.title||e.$slots.title||t.subtitle||e.$slots.subtitle||t.showCloseButton?(i(),r("div",J,[u("div",null,[e.$slots.title||t.title?(i(),r("h3",{key:0,id:t.titleId,class:"text-lg font-medium text-gray-800 sm:text-xl dark:text-gray-800"},[m(e.$slots,"title",{},()=>[I(S(t.title),1)])],8,P)):c("",!0),e.$slots.subtitle||t.subtitle?(i(),r("p",{key:1,id:t.descriptionId,class:"mt-1 text-sm text-gray-600 dark:text-gray-600"},[m(e.$slots,"subtitle",{},()=>[I(S(t.subtitle),1)])],8,Q)):c("",!0)]),t.showCloseButton?(i(),B(j,{key:0,variant:"ghost",size:"sm","aria-label":"Close modal",class:"-mt-2 -mr-2",onClick:s[0]||(s[0]=_=>y(!1))},{default:v(()=>s[1]||(s[1]=[u("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[u("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])),_:1})):c("",!0)])):c("",!0)]),default:v(()=>[u("div",X,[m(e.$slots,"default")])]),_:2},[e.$slots.footer?{name:"footer",fn:v(()=>[m(e.$slots,"footer")]),key:"0"}:void 0]),1032,["class","rounded"])],10,G)])):c("",!0)]))}});Z.__docgenInfo={exportName:"default",displayName:"TModal",description:"",tags:{},props:[{name:"modelValue",description:"Controls whether the modal is visible",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"title",description:"Title of the modal - can also use title slot",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"subtitle",description:"Subtitle of the modal - can also use subtitle slot",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"size",description:"Size of the modal",type:{name:"ModalSize"},defaultValue:{func:!1,value:"'md'"},values:["sm","md","lg","xl","full"]},{name:"closeOnBackdrop",description:"Whether clicking the backdrop should close the modal",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showCloseButton",description:"Whether the modal should have a close button in the header",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"animated",description:"Whether to perform animations when showing/hiding",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"persistent",description:"Whether the modal should persist in the DOM when closed",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"class",description:"Additional classes to apply to the modal",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"id",description:"ID for the modal (required for accessibility)",type:{name:"string"},defaultValue:{func:!0,value:"() => `modal-${Math.random().toString(36).substring(2, 9)}`"}},{name:"titleId",description:"ID for the modal title element (required for accessibility)",type:{name:"string"},defaultValue:{func:!0,value:"() => `modal-title-${Math.random().toString(36).substring(2, 9)}`"}},{name:"descriptionId",description:"ID for the modal description element (required for accessibility)",type:{name:"string"},defaultValue:{func:!0,value:"() => `modal-description-${Math.random().toString(36).substring(2, 9)}`"}},{name:"autoFocus",description:"Whether to auto-focus the first element in the modal",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"initialFocusId",description:"ID of the element to focus when the modal opens",type:{name:"string"},defaultValue:{func:!1,value:"''"}}],events:[{name:"update:modelValue",type:{names:["boolean"]}},{name:"close"},{name:"open"}],slots:[{name:"header"},{name:"title"},{name:"subtitle"},{name:"default"},{name:"footer"}],sourceFiles:["/Users/marley/Dev/talic-vue/src/components/TModal.vue"]};export{Z as _};
